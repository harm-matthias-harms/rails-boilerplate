# frozen_string_literal: true

ActiveRecordDoctor.configure do
  global :ignore_tables, [
    # Ignore internal Rails-related tables.
    'ar_internal_metadata',
    'schema_migrations',
    'active_storage_blobs',
    'active_storage_attachments',
    'action_text_rich_texts',
    'good_jobs',
    'good_job_executions',
    'ahoy_events',
    'ahoy_visits'
  ]

  detector :undefined_table_references,
           ignore_models: [
             'ActionText::RichText',
             'ActionText::EncryptedRichText',
             'ActiveStorage::VariantRecord',
             'ActiveStorage::Blob',
             'ActiveStorage::Attachment',
             'ActionMailbox::InboundEmail'
           ]

  detector :missing_presence_validation,
           ignore_models: [
             'GoodJob::Execution',
             'GoodJob::Job',
             'GoodJob::BaseExecution',
             'GoodJob::DiscreteExecution'
           ]

  detector :extraneous_indexes,
           ignore_indexes: [
             'index_identities_on_user_id'
           ]
end
