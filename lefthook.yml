pre-commit:
  parallel: true
  commands:
    bundle audit:
      run: bundle audit --update
    bundle check:
      run: bundle check
    yarn audit:
      run: yarn audit
    lint ruby:
      run: bundle exec rubocop
    lint haml:
      run: bundle exec haml-lint
    lint js:
      run: yarn lint
    lint css:
      run: yarn lint:css
    brakeman:
      run: bundle exec brakeman --no-pager
    i18n tasks:
      run: bundle exec i18n-tasks health
pre-push:
  parallel: true
  scripts:
    branch_validation.sh:
      runner: bash
post-checkout: &post-checkoout
  parallel: true
  commands:
    git pull:
      run: git pull
    bundle install:
      run: bundle install
    yarn install:
      run: yarn install
post-merge: *post-checkoout
post-rewrite: *post-checkoout
